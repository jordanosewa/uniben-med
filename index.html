<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CampusEase â€” UNIBEN Medicine Orientation</title>
  <meta name="description" content="Orientation & clearance guide for new UNIBEN Medicine & Surgery students. Created by JORDAN OSEWA" />
  <!-- Lucide icons (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/lucide@0.250.0/dist/lucide.min.js"></script>

  <style>
    :root{
      --green:#0b7a4d;
      --green-2:#0f8451;
      --gold:#c89b2b;
      --bg:#f6fbf6;
      --card:#ffffff;
      --muted:#6b756d;
      --radius:14px;
      --shadow: 0 10px 30px rgba(9,18,12,0.06);
      --glass: rgba(255,255,255,0.7);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#f2f8f2);color:#04261f;min-height:100vh}
    a{color:inherit;text-decoration:none}
    button{font-family:inherit}

    /* Layout */
    .app{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
    .sidebar{
      background:linear-gradient(180deg,var(--green),var(--green-2));
      color:#fff;padding:20px;display:flex;flex-direction:column;gap:18px;
      border-right:1px solid rgba(255,255,255,0.04);
    }
    .brand{display:flex;flex-direction:column;gap:6px}
    .brand h1{margin:0;font-size:18px;letter-spacing:0.2px}
    .brand .subtitle{font-size:12px;opacity:0.95}
    .nav{display:flex;flex-direction:column;gap:6px}
    .nav a{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;color:var(--card);font-weight:600}
    .nav a.active, .nav a:hover{background:rgba(255,255,255,0.08)}
    .credits{font-size:12px;opacity:0.95}
    .sidebar .footer{margin-top:auto;font-size:12px;opacity:0.95}

    .main{padding:20px 28px}
    .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between}
    .search{flex:1;display:flex;gap:8px;align-items:center;margin-left:20px}
    .search input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid #e8f1ea;background:#fff}
    .menuBtn{display:none;background:transparent;border:1px solid rgba(0,0,0,0.06);padding:8px;border-radius:10px}

    /* Cards / grid */
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:18px;margin-top:18px}
    .col-4{grid-column:span 4}
    .col-8{grid-column:span 8}
    .col-12{grid-column:span 12}
    .card{background:var(--card);padding:16px;border-radius:var(--radius);box-shadow:var(--shadow);border:1px solid rgba(10,30,20,0.02)}

    .btn{background:var(--green);color:white;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .btn.ghost{background:transparent;color:var(--green);border:1px solid rgba(11,122,77,0.12)}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#eef8ef;font-weight:700;color:var(--green)}

    h1,h2,h3{margin:0}
    p{margin:0}

    /* list and details */
    .stepCard{border-radius:12px;padding:12px;border:1px solid #eef6ee;background:linear-gradient(180deg,#fff,#fbfffb)}
    details summary{cursor:pointer;padding:8px;border-radius:8px;list-style:none}
    details summary::-webkit-details-marker{display:none}
    details div{padding:8px}

    /* Documents list */
    .doc-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}

    /* Gallery */
    .gallery-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px}
    .thumb{background:#f8fff8;border-radius:12px;overflow:hidden;min-height:140px;display:flex;align-items:center;justify-content:center;color:#2f4b3f}

    /* Contacts */
    .contactCard{display:flex;gap:12px;align-items:center;padding:12px;border-radius:10px;background:#fff;border:1px solid #eef6ee}
    .avatar{width:56px;height:56px;border-radius:12px;background:linear-gradient(180deg,var(--green),var(--green-2));color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800}

    /* Notifications timeline */
    .timeline{display:flex;flex-direction:column;gap:12px}
    .notice{border-radius:12px;padding:14px;background:#fff;border:1px solid #eef6ee}

    footer.siteFooter{margin-top:30px;text-align:center;color:var(--muted);font-size:13px;padding:18px 0}

    /* Responsive */
    @media (max-width:980px){
      .app{grid-template-columns:1fr}
      .sidebar{position:fixed;left:-320px;top:0;height:100vh;width:320px;transition:left .22s;z-index:50}
      .sidebar.open{left:0}
      .menuBtn{display:inline-block}
      .main{padding:14px}
      .topbar{flex-direction:row;gap:8px}
      .col-4,.col-8{grid-column:span 12}
    }

    /* small helpers */
    .muted{color:var(--muted)}
    .small{font-size:13px;color:var(--muted)}
    .tag{display:inline-block;padding:6px 10px;border-radius:999px;background:#f0fff4;color:var(--green);font-weight:700}
    .center{display:flex;align-items:center;justify-content:center}
  </style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <h1>CampusEase â€” UNIBEN Med</h1>
        <div class="subtitle">Created by: <strong>JORDAN OSEWA</strong></div>
      </div>

      <nav class="nav" id="nav">
        <a href="#dashboard" data-view="dashboard" class="active"><span data-feather="layout"></span> Dashboard</a>
        <a href="#steps" data-view="steps"><span data-feather="list-checks"></span> Steps</a>
        <a href="#documents" data-view="documents"><span data-feather="file-text"></span> Documents</a>
        <a href="#gallery" data-view="gallery"><span data-feather="images"></span> Videos & Pictures</a>
        <a href="#contacts" data-view="contacts"><span data-feather="phone"></span> Contacts</a>
        <a href="#notifications" data-view="notifications"><span data-feather="bell"></span> Notifications</a>
        <a href="#location" data-view="location"><span data-feather="map-pin"></span> Location</a>
      </nav>

      <div class="credits">
        <div><strong>With credits to:</strong></div>
        <div style="font-size:13px;margin-top:6px">Emmanuel Ambitious (Aspiring CR)<br/>Bismarck Grace (Aspiring ACR)<br/>Henry Chief Dawn (Aspiring CR)<br/>Glucoguru (Aspiring CR)</div>
      </div>

      <div class="footer">
        <small>Â© 2025 UNIBEN Medical Orientation</small><br/>
        <small>Designed by Jordan Osewa</small>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <div class="topbar">
        <div style="display:flex;align-items:center;gap:12px">
          <button class="menuBtn" id="menuBtn" aria-label="menu">â˜°</button>
          <div>
            <h2 id="pageTitle">Dashboard</h2>
            <div class="small muted">Welcome â€” open the sidebar to navigate</div>
          </div>
        </div>
        <div class="search">
          <input id="globalSearch" placeholder="Search documents, videos, contacts..." />
          <button class="btn ghost" id="searchBtn">Search</button>
        </div>
      </div>

      <!-- Views container (SPA-like using hash) -->
      <section id="dashboardView" class="view">
        <!-- Hero -->
        <div class="card" style="background:linear-gradient(180deg,#0b7a4d,#0f8451);color:white;padding:26px;border-radius:20px;margin-top:12px">
          <div style="display:flex;flex-direction:column;align-items:center;gap:12px;text-align:center">
            <div style="background:rgba(255,255,255,0.12);padding:10px;border-radius:12px"><svg data-feather="graduation-cap" width="36" height="36"></svg></div>
            <h1 style="font-size:28px;margin:0">Welcome, New UNIBEN Medical Student! ðŸŽ“</h1>
            <p class="muted" style="color:rgba(255,255,255,0.9);max-width:720px">This is your orientation guide for everything from clearance to hostel life.</p>
            <div style="margin-top:6px">
              <button class="btn" id="startOrientationBtn">Start Orientation â†’</button>
            </div>

            <div style="margin-top:14px;background:rgba(255,255,255,0.06);padding:12px;border-radius:12px;width:100%;max-width:760px">
              <div style="font-weight:700">Created by: <span style="color:#fff">JORDAN OSEWA</span> â€” Aspiring Congress Man</div>
              <div class="small muted" style="margin-top:6px">Credits: Emmanuel Ambitious, Bismarck Grace, Henry Chief Dawn, Glucoguru</div>
            </div>
          </div>
        </div>

        <!-- Quick stats + news -->
        <div class="grid" style="margin-top:18px">
          <div class="col-4 card center" style="flex-direction:column;gap:8px">
            <div class="small muted">Total Steps</div>
            <div style="font-size:22px;font-weight:800">6</div>
            <div class="tag">Clearance: Pending</div>
          </div>

          <div class="col-4 card center" style="flex-direction:column;gap:8px">
            <div class="small muted">Next Deadline</div>
            <div style="font-size:20px;font-weight:700">5 Jan 2026</div>
            <div class="small muted">Course Registration ends</div>
          </div>

          <div class="col-4 card">
            <h3 style="margin-bottom:8px">News & Updates</h3>
            <div id="newsList">
              <!-- injected -->
            </div>
            <div style="margin-top:8px;text-align:right"><small class="muted">Last updated: <span id="newsDate">â€”</span></small></div>
          </div>

          <div class="col-8 card col-12" style="margin-top:12px">
            <h3>Quick Checklist</h3>
            <ul style="margin-top:8px;color:var(--muted)">
              <li>Pay acceptance fee (approx <strong>â‚¦123,000</strong>)</li>
              <li>Prepare the required documents (see Steps â†’ Online Clearance)</li>
              <li>Make Remita payment for Student Record File (â‚¦3,000)</li>
              <li>Complete Medical Examination (wait for official price)</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Steps -->
      <section id="stepsView" class="view" style="display:none">
        <div class="card" style="margin-top:12px">
          <h2>Step-by-Step Guide</h2>
          <p class="muted" style="margin-top:8px">Follow these steps carefully to complete your admission clearance and registration.</p>
        </div>

        <div style="margin-top:12px;display:flex;flex-direction:column;gap:12px">
          <!-- Step 1 -->
          <div class="stepCard card">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div><strong>Step 1 â€” Online Clearance</strong><div class="small muted">Pay acceptance fee (~â‚¦123,000) and upload documents.</div></div>
              <div class="pill">Required</div>
            </div>

            <details open style="margin-top:10px">
              <summary>Documents & Approx Fees</summary>
              <div>
                <ol style="margin-top:8px">
                  <li>JAMB Admission Letter â€” â‚¦3,500</li>
                  <li>JAMB Original Result â€” â‚¦3,000</li>
                  <li>Original WAEC/NECO Certificate</li>
                  <li>Birth Certificate</li>
                  <li>Local Government of Origin â€” â‚¦10,000</li>
                  <li>Acceptance Letter â€” â‚¦500</li>
                  <li>Guarantorâ€™s Letter â€” â‚¦500</li>
                  <li>Affidavit of Good Conduct â€” â‚¦3,000</li>
                  <li>Affidavit of Non-Membership of Secret Cult â€” â‚¦3,000</li>
                  <li>Scratch Card â€” â‚¦5,000</li>
                  <li>Passport Photograph (Red Background) â€” â‚¦1,000 (on-campus)</li>
                  <li>Testimonial</li>
                </ol>
                <p class="muted" style="margin-top:8px">After upload, wait to be cleared by the clearance officer.</p>
              </div>
            </details>

            <details style="margin-top:10px">
              <summary>How to pay Acceptance Fee & Upload</summary>
              <div>
                <ol>
                  <li>Log into your UNIBEN portal â†’ follow clearance/payment links.</li>
                  <li>Pay acceptance fee via the approved gateway (keep receipt).</li>
                  <li>Upload scanned documents and save screenshots.</li>
                  <li>Keep originals for physical clearance.</li>
                </ol>
              </div>
            </details>
          </div>

          <!-- Step 2 -->
          <div class="stepCard card">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div><strong>Step 2 â€” Physical Clearance</strong><div class="small muted">Collect Student Record File, complete Medical Examination.</div></div>
              <div class="pill">Important</div>
            </div>

            <details open style="margin-top:10px">
              <summary>Remita Walkthrough for Student Record File (â‚¦3,000)</summary>
              <div>
                <ol style="margin-top:8px">
                  <li>Go to <a href="https://remita.net" target="_blank">Remita.net</a></li>
                  <li>Search "UNIVERSITY OF BENIN - 1000112"</li>
                  <li>Select "STUDENTS' RECORD FILE"</li>
                  <li>Fill: JAMB Reg, Department: MEDICINE, GIFMIS Code: <strong>0517021006</strong>, Amount: â‚¦3,000</li>
                  <li>Submit, print receipt â†’ Confirm at Bursary â†’ Buy stamps â†’ Collect receipt</li>
                  <li>Proceed to Exams & Records to collect Student Record File</li>
                  <li>Buy Scratch Card (â‚¦5,000)</li>
                </ol>
              </div>
            </details>

            <details style="margin-top:10px">
              <summary>Medical Examination (Medical Clearance)</summary>
              <div>
                <p class="muted">Medical exam connects you to student health services. Official price is pending â€” <strong>do not pay yet</strong> until confirmed.</p>
              </div>
            </details>
          </div>

          <!-- Placeholder extra steps -->
          <div class="stepCard card">
            <strong>Step 3 â€” Accommodation & Hostel (Coming Soon)</strong>
            <p class="muted" style="margin-top:8px">Hostel move-in instructions and checklist will be published here.</p>
          </div>
        </div>
      </section>

      <!-- Documents -->
      <section id="documentsView" class="view" style="display:none">
        <div class="card" style="margin-top:12px">
          <h2>Documents</h2>
          <p class="muted" style="margin-top:6px">Search or filter documents you need to prepare.</p>

          <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
            <input id="docSearch" placeholder="Search documents..." style="padding:10px;border-radius:10px;border:1px solid #eef6ee;flex:1;min-width:200px" />
            <select id="docFilter" style="padding:10px;border-radius:10px;border:1px solid #eef6ee">
              <option value="all">All categories</option>
              <option value="clearance">Clearance</option>
              <option value="medical">Medical</option>
              <option value="hostel">Hostel</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="doc-grid" id="docGrid" style="margin-top:12px">
            <!-- injected -->
          </div>
        </div>
      </section>

      <!-- Gallery -->
      <section id="galleryView" class="view" style="display:none">
        <div class="card" style="margin-top:12px">
          <h2>Videos & Pictures</h2>
          <p class="muted" style="margin-top:6px">Campus tours, hostel photos and short guides. (Placeholders for now)</p>

          <div style="margin-top:12px">
            <div class="gallery-grid" id="galleryGrid">
              <!-- injected -->
            </div>
          </div>
        </div>
      </section>

      <!-- Contacts -->
      <section id="contactsView" class="view" style="display:none">
        <div class="card" style="margin-top:12px">
          <h2>Contacts</h2>
          <p class="muted" style="margin-top:6px">Reach out to clearance officers, department contacts, and student reps.</p>

          <div style="margin-top:12px;display:flex;gap:12px;flex-direction:column" id="contactsList">
            <!-- injected -->
          </div>
        </div>
      </section>

      <!-- Notifications -->
      <section id="notificationsView" class="view" style="display:none">
        <div class="card" style="margin-top:12px">
          <h2>Notifications</h2>
          <p class="muted" style="margin-top:6px">Create and manage announcements. Data stored locally in your browser (you can export/import JSON).</p>

          <form id="notifForm" style="margin-top:12px;display:grid;grid-template-columns:1fr 200px;gap:8px">
            <input id="n_title" placeholder="Title (required)" required style="padding:10px;border-radius:8px;border:1px solid #eef6ee" />
            <input id="n_date" type="date" required style="padding:10px;border-radius:8px;border:1px solid #eef6ee" />
            <select id="n_category" style="padding:10px;border-radius:8px;border:1px solid #eef6ee">
              <option value="">Category</option>
              <option value="urgent">urgent</option>
              <option value="important">important</option>
              <option value="info">info</option>
              <option value="reminder">reminder</option>
            </select>
            <input id="n_icon" placeholder="Icon (optional)" style="padding:10px;border-radius:8px;border:1px solid #eef6ee" />
            <textarea id="n_description" placeholder="Description" rows="2" style="grid-column:span 2;padding:10px;border-radius:8px;border:1px solid #eef6ee"></textarea>

            <div style="display:flex;gap:8px">
              <button class="btn" id="addNotifBtn">Add Notification</button>
              <button class="btn ghost" type="button" id="exportBtn">Export JSON</button>
              <button class="btn ghost" type="button" id="importBtn">Import JSON</button>
            </div>
          </form>

          <div style="margin-top:12px">
            <label>Filter: </label>
            <select id="notifFilter" style="padding:8px;border-radius:8px;border:1px solid #eef6ee">
              <option value="all">All</option>
              <option value="urgent">urgent</option>
              <option value="important">important</option>
              <option value="info">info</option>
              <option value="reminder">reminder</option>
            </select>
          </div>

          <div class="timeline" id="notifList" style="margin-top:12px"></div>
        </div>
      </section>

      <!-- Location -->
      <section id="locationView" class="view" style="display:none">
        <div class="card" style="margin-top:12px">
          <h2>Location & Campus Tours</h2>
          <p class="muted" style="margin-top:6px">Campus tours and location guides coming soon. You can embed Google Maps or short videos here later.</p>
        </div>
      </section>

      <footer class="siteFooter">
        Â© 2025 UNIBEN Medical Orientation | Designed by Jordan Osewa
      </footer>
    </main>
  </div>

  <script>
    /* -----------------------
       Simple SPA-like routing
       ----------------------- */
    const views = {
      dashboard: document.getElementById('dashboardView'),
      steps: document.getElementById('stepsView'),
      documents: document.getElementById('documentsView'),
      gallery: document.getElementById('galleryView'),
      contacts: document.getElementById('contactsView'),
      notifications: document.getElementById('notificationsView'),
      location: document.getElementById('locationView')
    };
    const navLinks = document.querySelectorAll('.nav a');
    const pageTitle = document.getElementById('pageTitle');
    const sidebar = document.getElementById('sidebar');
    const menuBtn = document.getElementById('menuBtn');

    function showView(name){
      Object.values(views).forEach(v => v.style.display = 'none');
      if(!views[name]) name = 'dashboard';
      views[name].style.display = 'block';
      pageTitle.textContent = name.charAt(0).toUpperCase() + name.slice(1);
      navLinks.forEach(a => a.classList.toggle('active', a.dataset.view === name));
      // close sidebar on mobile
      if(window.innerWidth < 980) sidebar.classList.remove('open');
    }

    // hash-based nav
    function goHash(){
      const h = location.hash.replace('#','') || 'dashboard';
      showView(h);
    }
    window.addEventListener('hashchange', goHash);
    // initial
    goHash();

    // attach nav clicks (ensures URL hash sets)
    navLinks.forEach(a => a.addEventListener('click', (e)=>{
      e.preventDefault();
      const view = a.dataset.view;
      location.hash = view;
    }));

    menuBtn.addEventListener('click', ()=> sidebar.classList.toggle('open'));
    // close sidebar if click outside on mobile
    document.addEventListener('click', (e)=>{
      if(window.innerWidth < 980 && !sidebar.contains(e.target) && !menuBtn.contains(e.target)){
        sidebar.classList.remove('open');
      }
    });

    /* -----------------------
       Sample data (documents, gallery, contacts, news)
       ----------------------- */
    const sampleDocs = [
      { id: 'd1', name: 'JAMB Admission Letter', category:'clearance', description:'Official JAMB admission letter', cost:3500, required:true },
      { id: 'd2', name: 'JAMB Original Result', category:'clearance', description:'Original result slip', cost:3000, required:true },
      { id: 'd3', name: 'WAEC/NECO Certificate', category:'clearance', description:'Original certificate', cost:0, required:true },
      { id: 'd4', name: 'Birth Certificate', category:'other', description:'Birth certificate copy', cost:0, required:true },
      { id: 'd5', name: 'Local Government of Origin', category:'other', description:'LG certificate', cost:10000, required:true },
      { id: 'd6', name: 'Affidavit of Good Conduct', category:'other', description:'Police affidavit', cost:3000, required:true }
    ];
    const sampleGallery = [
      { id:'g1', title:'Faculty of Medicine â€“ Front', category:'faculty', type:'image', url:'https://images.unsplash.com/photo-1542744173-8e7e53415bb0?w=1200&q=60' },
      { id:'g2', title:'Hostel Block A', category:'hostel', type:'image', url:'https://images.unsplash.com/photo-1505691723518-36aee0f2d3b4?w=1200&q=60' },
      { id:'g3', title:'Orientation Walk (teaser)', category:'orientation', type:'video', url:'' }
    ];
    const sampleContacts = [
      { id:'c1', name:'Emmanuel Ambitious', role:'Aspiring CR', phone:'+2348000000000', category:'student_rep', whatsapp:'' },
      { id:'c2', name:'Bismarck Grace', role:'Aspiring ACR', phone:'+2348000000001', category:'student_rep', whatsapp:'' },
      { id:'c3', name:'Exams & Records (Dept)', role:'Department Office', phone:'+2348000000100', category:'department', whatsapp:'' }
    ];
    const sampleNews = [
      { id:'n1', title:'Physical Clearance Has Officially Started!', description:'Begin your process as soon as possible. Visit Exams & Records with documents.', date:'2025-11-10', category:'urgent' },
      { id:'n2', title:'Online Clearance & Registration Begins', description:'Online clearance and registration expected to open on 10 Nov 2025.', date:'2025-11-10', category:'important' }
    ];

    /* -----------------------
       Render helpers
       ----------------------- */
    function renderDocs(list = sampleDocs){
      const grid = document.getElementById('docGrid'); grid.innerHTML = '';
      list.forEach(doc=>{
        const el = document.createElement('div');
        el.className = 'card';
        el.innerHTML = `
          <div style="display:flex;justify-content:space-between;align-items:start;gap:12px">
            <div>
              <h3 style="margin-bottom:6px">${escapeHtml(doc.name)}</h3>
              <div class="small muted">${escapeHtml(doc.description || '')}</div>
              <div style="margin-top:8px">${doc.required ? '<span class="tag">Required</span>' : ''}</div>
            </div>
            <div style="text-align:right">
              ${doc.cost > 0 ? `<div class="small muted">Cost</div><div style="font-weight:800;color:var(--green)">â‚¦${numberWithCommas(doc.cost)}</div>` : '<div class="small muted">No fee</div>'}
            </div>
          </div>
        `;
        grid.appendChild(el);
      });
    }
    function renderGallery(list = sampleGallery){
      const g = document.getElementById('galleryGrid'); g.innerHTML = '';
      list.forEach(item=>{
        const card = document.createElement('div'); card.className='card';
        if(item.type === 'image'){
          card.innerHTML = `<div style="border-radius:12px;overflow:hidden"><img src="${item.url}" alt="${escapeHtml(item.title)}" style="width:100%;height:160px;object-fit:cover;display:block" /></div>
            <div style="padding:10px"><strong>${escapeHtml(item.title)}</strong><div class="small muted" style="margin-top:6px">${escapeHtml(item.category)}</div></div>`;
        }else{
          card.innerHTML = `<div class="thumb"><svg data-feather="video" width="56" height="56"></svg></div>
            <div style="padding:10px"><strong>${escapeHtml(item.title)}</strong><div class="small muted" style="margin-top:6px">${escapeHtml(item.category)} â€¢ Video</div></div>`;
        }
        g.appendChild(card);
      });
      // re-init lucide icons inside added nodes
      lucide.replace();
    }
    function renderContacts(list = sampleContacts){
      const out = document.getElementById('contactsList'); out.innerHTML = '';
      list.forEach(c=>{
        const div = document.createElement('div'); div.className='contactCard';
        div.innerHTML = `<div class="avatar">${escapeInitials(c.name)}</div>
          <div style="flex:1">
            <div style="display:flex;justify-content:space-between;align-items:start">
              <div><strong>${escapeHtml(c.name)}</strong><div class="small muted">${escapeHtml(c.role)}</div></div>
              <div style="text-align:right"><a href="tel:${c.phone}" class="small">${c.phone}</a></div>
            </div>
            <div style="margin-top:8px;display:flex;gap:8px">
              ${c.phone ? `<a href="tel:${c.phone}" class="btn ghost">Call</a>` : ''}
              ${c.whatsapp ? `<a href="${c.whatsapp}" class="btn">WhatsApp</a>` : ''}
            </div>
          </div>`;
        out.appendChild(div);
      });
    }
    function renderNews(list = sampleNews){
      const nl = document.getElementById('newsList'); nl.innerHTML = '';
      list.forEach(n => {
        const d = document.createElement('div'); d.className='notice';
        d.innerHTML = `<strong>${escapeHtml(n.title)}</strong><div class="small muted" style="margin-top:6px">${escapeHtml(n.description)}</div><div style="margin-top:8px;text-align:right"><small class="muted">${n.date}</small></div>`;
        nl.appendChild(d);
      });
      document.getElementById('newsDate').textContent = (new Date()).toLocaleDateString();
    }

    // initial render
    renderDocs();
    renderGallery();
    renderContacts();
    renderNews();

    /* -----------------------
       Search across docs, gallery, contacts
       ----------------------- */
    document.getElementById('searchBtn').addEventListener('click', doSearch);
    document.getElementById('globalSearch').addEventListener('keydown', (e)=>{ if(e.key==='Enter') doSearch(); });

    function doSearch(){
      const q = document.getElementById('globalSearch').value.trim().toLowerCase();
      if(!q) return alert('Type a search term (e.g., JAMB, Remita, Hostel).');
      // search docs
      const dMatches = sampleDocs.filter(d => `${d.name} ${d.description || ''}`.toLowerCase().includes(q));
      renderDocs(dMatches);
      // show documents view
      location.hash = 'documents';
      showView('documents');
      // highlight query (basic): set docSearch value
      document.getElementById('docSearch').value = q;
    }

    // doc filter UI
    document.getElementById('docFilter').addEventListener('change', ()=>{
      const cat = document.getElementById('docFilter').value;
      const q = document.getElementById('docSearch').value.trim().toLowerCase();
      const filtered = sampleDocs.filter(d => (cat === 'all' || d.category === cat) && (q === '' || `${d.name} ${d.description||''}`.toLowerCase().includes(q)));
      renderDocs(filtered);
    });
    document.getElementById('docSearch').addEventListener('input', ()=>{
      const q = document.getElementById('docSearch').value.trim().toLowerCase();
      const cat = document.getElementById('docFilter').value;
      const filtered = sampleDocs.filter(d => (cat === 'all' || d.category === cat) && (q === '' || `${d.name} ${d.description||''}`.toLowerCase().includes(q)));
      renderDocs(filtered);
    });

    /* -----------------------
       Notifications (localStorage)
       ----------------------- */
    const STORAGE_KEY = 'campusease_notifications_v1';
    function loadNotifs(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)) || []; }catch(e){return [];} }
    function saveNotifs(arr){ localStorage.setItem(STORAGE_KEY, JSON.stringify(arr)); }
    function validateNotif(n){ return n.title && n.date && ['urgent','important','info','reminder'].includes(n.category); }

    function renderNotifs(){
      const list = loadNotifs();
      const filter = document.getElementById('notifFilter').value;
      const shown = list.filter(n => filter === 'all' ? true : n.category === filter);
      const out = document.getElementById('notifList'); out.innerHTML = '';
      if(shown.length === 0){ out.innerHTML = '<div class="small muted">No notifications</div>'; return; }
      shown.forEach(n => {
        const el = document.createElement('div'); el.className='notice';
        el.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:start">
          <div>
            <strong>${escapeHtml(n.title)}</strong>
            <div class="small muted" style="margin-top:6px">${escapeHtml(n.description || '')}</div>
          </div>
          <div style="text-align:right">
            <div class="small muted">${escapeHtml(n.date)}</div>
            <div style="margin-top:8px"><span class="tag">${escapeHtml(n.category)}</span></div>
            <div style="margin-top:8px"><button class="btn ghost" data-id="${escapeHtml(n._id||n.title)}" onclick="deleteNotif('${escapeHtml(n._id||n.title)}')">Delete</button></div>
          </div>
        </div>`;
        out.appendChild(el);
      });
    }

    // seed default notifications into storage if empty
    if(loadNotifs().length === 0){
      const seed = [
        { _id:'seed1', title:'Online Clearance & Registration begins', description:'Online clearance expected to open on 10 Nov 2025', date:'2025-11-10', category:'important' },
        { _id:'seed2', title:'Physical Clearance Started', description:'Proceed to Exams & Records with receipts', date:'2025-11-11', category:'urgent' }
      ];
      saveNotifs(seed);
    }
    renderNotifs();

    document.getElementById('addNotifBtn').addEventListener('click', (e)=>{
      e.preventDefault();
      const n = {
        _id: 'id'+Date.now(),
        title: document.getElementById('n_title').value.trim(),
        description: document.getElementById('n_description').value.trim(),
        date: document.getElementById('n_date').value,
        category: document.getElementById('n_category').value
      };
      if(!validateNotif(n)) return alert('Please fill Title, Date and select a valid Category.');
      const list = loadNotifs(); list.unshift(n); saveNotifs(list); renderNotifs(); document.getElementById('notifForm').reset();
      alert('Notification added locally.');
    });

    document.getElementById('notifFilter').addEventListener('change', renderNotifs);

    window.deleteNotif = function(id){
      if(!confirm('Delete this notification?')) return;
      let list = loadNotifs(); list = list.filter(x => x._id !== id); saveNotifs(list); renderNotifs();
    };

    // export/import
    document.getElementById('exportBtn').addEventListener('click', ()=>{
      const blob = new Blob([JSON.stringify(loadNotifs(),null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'campusease_notifications.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });
    document.getElementById('importBtn').addEventListener('click', ()=>{
      const text = prompt('Paste notifications JSON (array format). This will replace existing notifications.');
      if(!text) return;
      try{
        const arr = JSON.parse(text);
        if(!Array.isArray(arr)) throw new Error('JSON should be an array');
        for(const n of arr){ if(!validateNotif(n)) throw new Error('Each notification must have title, date and category'); }
        saveNotifs(arr); renderNotifs(); alert('Imported notifications.');
      }catch(err){ alert('Import failed: '+err.message); }
    });

    /* -----------------------
       Utilities
       ----------------------- */
    function escapeHtml(s){ return String(s || '').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }
    function numberWithCommas(x){ return String(x).replace(/\B(?=(\d{3})+(?!\d))/g, ","); }
    function escapeInitials(name){ return (name||'').split(' ').map(n=>n[0]?.toUpperCase()).join('').slice(0,2); }

    /* -----------------------
       Wire up "Start Orientation" button
       ----------------------- */
    document.getElementById('startOrientationBtn').addEventListener('click', ()=>{
      location.hash = 'steps';
    });

    // init lucide icons
    lucide.replace();
  </script>
</body>
</html>
